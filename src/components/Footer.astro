---
import { SITE_CONTENT } from "../utils/siteContent";
import { FOOTER_LEGAL_LINKS, FOOTER_SECTIONS, FOOTER_SOCIAL_LINKS } from "../utils/navigation";
import ResourceIcons from "./ResourceIcons.astro";

const primaryFooterSections = FOOTER_SECTIONS.filter(
  (section) => section.heading !== "Resources",
);

const resourcesFooterSections = FOOTER_SECTIONS.filter(
  (section) => section.heading === "Resources",
);
---

<footer id="resources" aria-label="Footer" class="c-footer layout bound-x scheme-dark">
  <div class="c-footer__container">
    <div class="c-footer__top">
      <div class="c-footer__left">
        <div class="c-footer__brand">
          <a href="/" class="inline-flex items-center gap-2">
            <div class="h-8 w-8 rounded-lg bg-gradient-to-br from-indigo-500 to-violet-500" />
            <span class="font-semibold tracking-tight">{SITE_CONTENT.siteName}</span>
          </a>
          <p class="c-footer__brand-text max-w-md">{SITE_CONTENT.footerDescription}</p>
        </div>

        <div class="c-footer__newsletter">
          <div>
            <h3 class="c-title typo-p variant-p-sm !font-bold mb-5">Sign up for our newsletter</h3>

            <div class="c-form c-form--newsletter js-form vp7:w-[50%]">
              <div class="c-form__form flex flex-col gap-8">
                <div class="fui-i c-form__wrapper">
                  <form
                    id="fui-newsletter-trangx"
                    class="fui-form fui-labels-above-input"
                    method="post"
                    enctype="multipart/form-data"
                    accept-charset="utf-8"
                    action="https://timefold.ai/index.php?p=actions/formie/submissions/submit"
                    data-form-handle="newsletter"
                    data-form-submit-method="ajax"
                    data-form-submit-action="message"
                    novalidate="true"
                  >
                    <input type="hidden" name="action" value="formie/submissions/submit" />
                    <input type="hidden" name="submitAction" value="submit" />
                    <input type="hidden" name="handle" value="newsletter" />
                    <input type="hidden" name="siteId" value="1" />

                    <div class="fui-form-container c-form__container">
                      <div id="fui-newsletter-trangx-p-2" class="fui-page c-form__page" data-index="0" data-id="2" data-fui-page>
                        <div class="fui-page-container c-form__page-container">
                          <div class="fui-row fui-page-row c-form__row" data-fui-field-count="1">
                            <div class="fui-field fui-type-email fui-label-hidden fui-subfield-label-hidden fui-instructions-above-input fui-field-required fui-page-field c-form__field" data-field-handle="email" data-field-type="email" data-validation="required|email">
                              <div class="fui-field-container c-form__field-container">
                                <label class="fui-label c-form__field-label sr-only" for="fui-newsletter-trangx-fields-email" data-field-label data-fui-sr-only>
                                  Email <span class="fui-required c-form__field-required" aria-hidden="true">*</span>
                                </label>
                                <div class="fui-input-wrapper">
                                  <input
                                    type="email"
                                    id="fui-newsletter-trangx-fields-email"
                                    class="c-form__field-input"
                                    name="fields[email]"
                                    value=""
                                    placeholder="Enter your email"
                                    autocomplete="email"
                                    required
                                    data-fui-id="newsletter-email"
                                  />
                                </div>
                              </div>
                            </div>
                          </div>

                          <div class="fui-row fui-page-row c-form__row" data-fui-field-count="1">
                            <div class="fui-field fui-type-agree fui-label-hidden fui-subfield-label-hidden fui-instructions-above-input fui-field-required fui-page-field c-form__field c-form__field-agree-button" data-field-handle="agreeCheckbox" data-field-type="agree" data-validation="required">
                              <fieldset class="fui-fieldset c-form__field-container">
                                <legend class="fui-legend c-form__field-label sr-only" data-field-label data-fui-sr-only>
                                  Agree checkbox <span class="fui-required c-form__field-required" aria-hidden="true">*</span>
                                </legend>
                                <div class="fui-input-wrapper">
                                  <input type="hidden" name="fields[agreeCheckbox]" value="" data-fui-input-type="agree" />
                                  <div class="fui-checkbox c-form__field-agree-option">
                                    <input
                                      type="checkbox"
                                      id="fui-newsletter-trangx-fields-agreeCheckbox"
                                      class="c-form__field-input"
                                      name="fields[agreeCheckbox]"
                                      value="1"
                                      required
                                      data-fui-id="newsletter-agreeCheckbox"
                                      data-fui-input-type="agree"
                                      data-required-message="You have to accept our terms and conditions to complete the submission."
                                    />
                                    <label class="fui-checkbox-label c-form__field-agree-option-label" for="fui-newsletter-trangx-fields-agreeCheckbox">
                                      By submitting this form you agree to our terms and conditions and our privacy policy.
                                    </label>
                                  </div>
                                </div>
                              </fieldset>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>

                    <div class="c-form__button-wrapper">
                      <button type="submit" class="c-form__submit-button c-button c-button--primary" data-submit-action="submit">Subscribe</button>
                    </div>
                  </form>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="c-footer__column-nav">
        <nav class="c-footer__column-col">
          {primaryFooterSections.map((section) => (
            <div class="c-footer__column-batch">
              {section.heading && <h3 class="c-footer__column-title typo-footer-column-title">{section.heading}</h3>}
              <ul class="c-footer__column-list">
                {section.links.map((link) => (
                  <li>
                    <a href={link.href} class="c-footer__column-item">{link.label}</a>
                  </li>
                ))}
              </ul>
            </div>
          ))}
        </nav>

        <nav class="c-footer__column-col">
          {resourcesFooterSections.map((section) => (
            <div class="c-footer__column-batch">
              {section.heading && <h3 class="c-footer__column-title typo-footer-column-title">{section.heading}</h3>}
              <ul class="c-footer__column-list">
                {section.links.map((link) => (
                  <li>
                    <a href={link.href} class="c-footer__column-item">{link.label}</a>
                  </li>
                ))}
              </ul>
            </div>
          ))}
        </nav>
      </div>

      <div class="c-footer__column-social">
        <nav class="c-footer__column-col">
          <div class="c-footer__column-batch">
            <h4 class="c-footer__column-title typo-footer-column-title">Find us on</h4>
            <ul class="c-footer__column-list">
              {FOOTER_SOCIAL_LINKS.map((social) => (
                <li>
                  <a class="c-link c-footer__column-item" href={`${social.url}${social.id}`} target="_blank" rel="noopener noreferrer">
                    <span class="c-icon c-icon--before">
                      <ResourceIcons name={social.icon} size={16} color="currentColor" />
                    </span>
                    <span class="c-link__text">{social.label}</span>
                  </a>
                </li>
              ))}
            </ul>
          </div>
        </nav>
      </div>
    </div>

    <div class="c-footer__bottom">
      <span class="c-footer__bottom-legal-text">Â© {new Date().getFullYear()} {SITE_CONTENT.companyName}</span>
      <div class="c-footer__bottom-legal">
        {FOOTER_LEGAL_LINKS.map((link) => (
          <a href={link.href} class="c-footer__bottom-legal-link c-footer__column-item">{link.label}</a>
        ))}
      </div>
    </div>
  </div>
</footer>
